{"ast":null,"code":"import * as actionTypes from './actionType.js';\nimport * as form from './form.js';\nimport axios from 'axios';\nexport var setUserInfo = function setUserInfo(userInfo) {\n  return {\n    type: actionTypes.SET_USER_INFO,\n    userInfo: userInfo\n  };\n};\nexport var signupFailed = function signupFailed(error) {\n  return {\n    type: actionTypes.SIGNUP_FAILED,\n    error: error\n  };\n};\nexport var updateProfile = function updateProfile(imgpath, itemselection, itemname, itemdescription, itemprice, userId) {\n  return function (dispatch) {\n    dispatch(form.startLoading('editProfile'));\n    console.log(imgpath, itemselection, itemname, itemdescription, itemprice, userId);\n    axios.post('http://localhost:3001/update_profile', {\n      name: itemname,\n      description: itemdescription,\n      price: itemprice,\n      character_type: itemselection,\n      image_path: imgpath,\n      owner_id: userId\n    }).then(function (card) {\n      dispatch(addCardToTheDeck(card.data[0]));\n      console.log(card);\n      dispatch({\n        type: actionTypes.CLOSE_EDIT_ITEM_FORM\n      });\n      dispatch(form.stopLoading('editProfile'));\n    }).catch(function (error_msg) {\n      //dispatch(signupFailed(error))\n      dispatch(form.stopLoading('editProfile'));\n      dispatch(form.compFailed(error_msg.response.data, \"editProfile\"));\n    });\n  };\n};\nexport var login = function login(email, password) {\n  return function (dispatch) {\n    dispatch(form.startLoading('login'));\n    axios.post('http://localhost:3001/login', {\n      email: email,\n      password: password\n    }).then(function (user) {\n      dispatch(setUserInfo(user.data));\n      dispatch({\n        type: actionTypes.CLOSE_LOGIN_FORM\n      });\n      dispatch(form.stopLoading('login'));\n    }).catch(function (error_msg) {\n      dispatch(form.compFailed(error_msg.response.data, \"login\"));\n      dispatch(form.stopLoading('login'));\n    });\n  };\n};\nexport var signup = function signup(email, nickname, password) {\n  return function (dispatch) {\n    dispatch(form.startLoading('signup'));\n    axios.post('http://localhost:3001/signup', {\n      email: email,\n      nickname: nickname,\n      password: password\n    }).then(function (user) {\n      dispatch(setUserInfo(user.data));\n      dispatch({\n        type: actionTypes.CLOSE_LOGIN_FORM\n      });\n      dispatch(form.stopLoading('signup'));\n    }).catch(function (error_msg) {\n      dispatch(form.compFailed(error_msg.response.data, \"signup\"));\n      dispatch(form.stopLoading('signup'));\n    });\n  };\n};\nexport var signout = function signout() {\n  return {\n    type: actionTypes.SIGNOUT\n  };\n};","map":{"version":3,"sources":["D:\\udemy\\project\\pixwebsite\\src\\store\\actions\\account.js"],"names":["actionTypes","form","axios","setUserInfo","userInfo","type","SET_USER_INFO","signupFailed","error","SIGNUP_FAILED","updateProfile","imgpath","itemselection","itemname","itemdescription","itemprice","userId","dispatch","startLoading","console","log","post","name","description","price","character_type","image_path","owner_id","then","card","addCardToTheDeck","data","CLOSE_EDIT_ITEM_FORM","stopLoading","catch","error_msg","compFailed","response","login","email","password","user","CLOSE_LOGIN_FORM","signup","nickname","signout","SIGNOUT"],"mappings":"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","sourcesContent":["import * as actionTypes from './actionType.js';\r\nimport * as form from './form.js';\r\nimport axios from 'axios';\r\n\r\nexport const setUserInfo = (userInfo) => {\r\n    return {\r\n        type: actionTypes.SET_USER_INFO,\r\n        userInfo: userInfo\r\n    };\r\n};\r\n\r\n\r\nexport const signupFailed = (error) => {\r\n    return {\r\n        type: actionTypes.SIGNUP_FAILED,\r\n        error: error,\r\n    };\r\n};\r\n\r\nexport const updateProfile = (imgpath, itemselection, itemname, itemdescription, itemprice, userId) => {\r\n    return (dispatch) => {\r\n        dispatch(form.startLoading('editProfile'));\r\n        console.log(imgpath, itemselection, itemname, itemdescription, itemprice, userId);\r\n        axios.post('http://localhost:3001/update_profile', {\r\n            name: itemname,\r\n            description: itemdescription,\r\n            price: itemprice,\r\n            character_type: itemselection,\r\n            image_path: imgpath,\r\n            owner_id: userId\r\n        })\r\n        .then(card => {\r\n            dispatch(addCardToTheDeck(card.data[0]));\r\n            console.log(card);\r\n            dispatch({type: actionTypes.CLOSE_EDIT_ITEM_FORM});\r\n            dispatch(form.stopLoading('editProfile'));\r\n        })\r\n        .catch(error_msg => {\r\n            //dispatch(signupFailed(error))\r\n            dispatch(form.stopLoading('editProfile'));\r\n            dispatch(form.compFailed(error_msg.response.data, \"editProfile\"));\r\n        });\r\n    }\r\n};\r\n\r\nexport const login = (email, password) => {\r\n\r\n    return (dispatch) => {\r\n        dispatch(form.startLoading('login'));\r\n        axios.post('http://localhost:3001/login', {\r\n            email: email,\r\n            password: password\r\n        })\r\n        .then(user => {\r\n            dispatch(setUserInfo(user.data));\r\n            dispatch({type: actionTypes.CLOSE_LOGIN_FORM});\r\n            dispatch(form.stopLoading('login'));\r\n        })\r\n        .catch(error_msg => {\r\n            dispatch(form.compFailed(error_msg.response.data, \"login\"));\r\n            dispatch(form.stopLoading('login'));\r\n        });\r\n    };\r\n};\r\n\r\nexport const signup = (email, nickname, password) => {\r\n    return (dispatch) => {\r\n        dispatch(form.startLoading('signup'));\r\n        axios.post('http://localhost:3001/signup', {\r\n            email: email,\r\n            nickname: nickname,\r\n            password: password\r\n        })\r\n        .then(user => {\r\n            dispatch(setUserInfo(user.data));\r\n            dispatch({type: actionTypes.CLOSE_LOGIN_FORM});\r\n            dispatch(form.stopLoading('signup'));\r\n        })\r\n        .catch(error_msg => {\r\n            dispatch(form.compFailed(error_msg.response.data, \"signup\"));\r\n            dispatch(form.stopLoading('signup'));\r\n        });\r\n    };\r\n}\r\n\r\nexport const signout = () => {\r\n    return {\r\n        type: actionTypes.SIGNOUT\r\n    };\r\n};"]},"metadata":{},"sourceType":"module"}